# Using php56 from ready image on docker hub
nginx:
  build: centos/nginx
  volumes:
    - ./app/php56/container-config/nginx/sites-available:/etc/nginx/sites-available
    - ./app/php56/container-config/nginx/sites-enabled:/etc/nginx/sites-enabled
    - ./app/php56/www:/var/www
    - ./app/php56/log/nginx:/var/log/nginx
  links:
    - php56
  ports:
    - 80:80
    - 443:443

php56:
  build: centos/php56
  volumes:
    - ./app/php56/www:/var/www
    - ./app/php56/container-config/php56:/etc/php-fpm.d
  expose:
    - 9000
  links:
    - mongodb
    - redis

mongodb:
  build: centos/mongodb
  volumes:
    - ./app/php56/container-config/mongodb:/etc/mongodb
    - ./app/php56/log/mongodb:/var/log/mongodb
    - ./app/php56/data/mongodb:/var/lib/mongo
  ports:
    - 27017:27017
  expose:
    - 27017

redis:
  build: centos/redis
  expose:
    - 6379
